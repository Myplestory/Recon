<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta htt-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"
    <title></title>
    <link rel="stylesheet" href="index.css">
    <script></script>
  </head>
  <body onload="InitializeChoices()">
    <header id="titlebar">
      <div id="drag-region">
        <div id="window-title">
          <span>Recon v.1</span>
        </div>
        <div id="window-controls">
          <div class="button" id="min-button">
            <img class="icon" srcset="icons/min-w-10.png 1x, icons/min-w-12.png 1.25x, icons/min-w-15.png 1.5x, icons/min-w-15.png 1.75x, icons/min-w-20.png 2x, icons/min-w-20.png 2.25x, icons/min-w-24.png 2.5x, icons/min-w-30.png 3x, icons/min-w-30.png 3.5x" draggable="false" />
          </div>
          <div class="button" id="max-button">
            <img class="icon" srcset="icons/max-w-10.png 1x, icons/max-w-12.png 1.25x, icons/max-w-15.png 1.5x, icons/max-w-15.png 1.75x, icons/max-w-20.png 2x, icons/max-w-20.png 2.25x, icons/max-w-24.png 2.5x, icons/max-w-30.png 3x, icons/max-w-30.png 3.5x" draggable="false" />
          </div>
          <div class="button" id="restore-button">
            <img class="icon" srcset="icons/restore-w-10.png 1x, icons/restore-w-12.png 1.25x, icons/restore-w-15.png 1.5x, icons/restore-w-15.png 1.75x, icons/restore-w-20.png 2x, icons/restore-w-20.png 2.25x, icons/restore-w-24.png 2.5x, icons/restore-w-30.png 3x, icons/restore-w-30.png 3.5x" draggable="false" />
          </div>
          <div class="button" id="close-button">
            <img class="icon" srcset="icons/close-w-10.png 1x, icons/close-w-12.png 1.25x, icons/close-w-15.png 1.5x, icons/close-w-15.png 1.75x, icons/close-w-20.png 2x, icons/close-w-20.png 2.25x, icons/close-w-24.png 2.5x, icons/close-w-30.png 3x, icons/close-w-30.png 3.5x" draggable="false" />
          </div>
        </div>
      </div>
    </header>
    <div class="container">
      <aside>
        <div id="delayspan">
          <span id="delaytitle">Refresh Delay</span>
        </div>
        <div id="delay">
          <div id="slider1">
            <span id="num" class="number">0</span>
            <span id="ms">s</span>
            <input id="refdelay" type="range" value="0" step="0.1" min="0.0" max="5.0"/>
          </div>
        </div>
        <div id="delayspan2">
          <span id="delaytitle2">Hover Delay</span>
        </div>
        <div id="delay2">
          <div id="slider2">
            <span id="num2" class="number2">0</span>
            <span id="ms2">s</span>
            <input id="hoverdelay" type="range" value="0.0" step="0.1" min="0.0" max="10.0"/>
          </div>
        </div>
        <div id="delayspan3">
          <span id="delaytitle3">Lock Delay</span>
        </div>
        <div id="delay3">
          <div id="slider3">
            <span id="num3" class="number3">0</span>
            <span id="ms3">s</span>
            <input id="lockdelay" type="range" value="0.0" step="0.1" min="0.0" max="50.0"/>
          </div>
        </div>
        <div id="Scan">
          <div id="ScanStart">
            <i class="background"></i>
            <button type="btn" id="startscan">Scan</button>
          </div>
        </div>
        <div id="Suppress">
          <div id="ScanEnd">
            <i class="background"></i>
            <button type="btn" id="endscan">Suppress</button>
          </div>
        </div>
        <div id="maps">
          <div class="images" id="Bind">
            <div class="image">
              <img class="icon" srcset="icons/Bind.jpg" width="100px"/>
            </div>
            <div class="dropdown" id="BindDropdown">
              <div class="select">
                <span class="selected" id="BindPick">Astra</span>
                <div class="caret"></div>
              </div>
              <ul class="menu">
                <li class="active">Astra</li>
                <li>Breach</li>
                <li>Brimstone</li>
                <li>Chamber</li>
                <li>Cypher</li>
                <li>Fade</li>
                <li>Gekko</li>
                <li>Harbor</li>
                <li>Jett</li>
                <li>KAY/O</li>
                <li>Killjoy</li>
                <li>Neon</li>
                <li>Omen</li>
                <li>Phoenix</li>
                <li>Raze</li>
                <li>Reyna</li>
                <li>Sage</li>
                <li>Skye</li>
                <li>Sova</li>
                <li>Viper</li>
                <li>Yoru</li>
              </ul>
            </div>
          </div>
          <div class="permap" id="Haven">
            <div class="image">
              <img class="icon" srcset="icons/Haven.jpg" width="100px"/>
            </div>
            <div class="dropdown" id="HavenDropdown">
              <div class="select">
                <span class="selected" id="HavenPick">Astra</span>
                <div class="caret"></div>
              </div>
              <ul class="menu">
                <li class="active">Astra</li>
                <li>Breach</li>
                <li>Brimstone</li>
                <li>Chamber</li>
                <li>Cypher</li>
                <li>Fade</li>
                <li>Gekko</li>
                <li>Harbor</li>
                <li>Jett</li>
                <li>KAY/O</li>
                <li>Killjoy</li>
                <li>Neon</li>
                <li>Omen</li>
                <li>Phoenix</li>
                <li>Raze</li>
                <li>Reyna</li>
                <li>Sage</li>
                <li>Skye</li>
                <li>Sova</li>
                <li>Viper</li>
                <li>Yoru</li>
              </ul>
            </div>
          </div>
          <div class="permap" id="Split">
            <div class="image">
              <img class="icon" srcset="icons/Split.jpg" width="100px"/>
            </div>
            <div class="dropdown" id="SplitDropdown">
              <div class="select">
                <span class="selected" id="SplitPick">Astra</span>
                <div class="caret"></div>
              </div>
              <ul class="menu">
                <li class="active">Astra</li>
                <li>Breach</li>
                <li>Brimstone</li>
                <li>Chamber</li>
                <li>Cypher</li>
                <li>Fade</li>
                <li>Gekko</li>
                <li>Harbor</li>
                <li>Jett</li>
                <li>KAY/O</li>
                <li>Killjoy</li>
                <li>Neon</li>
                <li>Omen</li>
                <li>Phoenix</li>
                <li>Raze</li>
                <li>Reyna</li>
                <li>Sage</li>
                <li>Skye</li>
                <li>Sova</li>
                <li>Viper</li>
                <li>Yoru</li>
              </ul>
            </div>
          </div>
          <div class="permap" id="Ascent">
            <div class="image">
              <img class="icon" srcset="icons/Ascent.jpg" width="100px"/>
            </div>
            <div class="dropdown" id="AscentDropdown">
              <div class="select">
                <span class="selected" id="AscentPick">Astra</span>
                <div class="caret"></div>
              </div>
              <ul class="menu">
                <li class="active">Astra</li>
                <li>Breach</li>
                <li>Brimstone</li>
                <li>Chamber</li>
                <li>Cypher</li>
                <li>Fade</li>
                <li>Gekko</li>
                <li>Harbor</li>
                <li>Jett</li>
                <li>KAY/O</li>
                <li>Killjoy</li>
                <li>Neon</li>
                <li>Omen</li>
                <li>Phoenix</li>
                <li>Raze</li>
                <li>Reyna</li>
                <li>Sage</li>
                <li>Skye</li>
                <li>Sova</li>
                <li>Viper</li>
                <li>Yoru</li>
              </ul>
            </div>
          </div>
          <div class="permap" id="Icebox">
            <div class="image">
              <img class="icon" srcset="icons/Icebox.jpg" width="100px"/>
            </div>
            <div class="dropdown" id="IceboxDropdown">
              <div class="select">
                <span class="selected" id="IceboxPick">Astra</span>
                <div class="caret"></div>
              </div>
              <ul class="menu">
                <li class="active">Astra</li>
                <li>Breach</li>
                <li>Brimstone</li>
                <li>Chamber</li>
                <li>Cypher</li>
                <li>Fade</li>
                <li>Gekko</li>
                <li>Harbor</li>
                <li>Jett</li>
                <li>KAY/O</li>
                <li>Killjoy</li>
                <li>Neon</li>
                <li>Omen</li>
                <li>Phoenix</li>
                <li>Raze</li>
                <li>Reyna</li>
                <li>Sage</li>
                <li>Skye</li>
                <li>Sova</li>
                <li>Viper</li>
                <li>Yoru</li>
              </ul>
            </div>
          </div>
          <div class="permap" id="Breeze">
            <div class="image">
              <img class="icon" srcset="icons/Breeze.jpg" width="100px"/>
            </div>
            <div class="dropdown" id="BreezeDropdown">
              <div class="select">
                <span class="selected" id="BreezePick">Astra</span>
                <div class="caret"></div>
              </div>
              <ul class="menu">
                <li class="active">Astra</li>
                <li>Breach</li>
                <li>Brimstone</li>
                <li>Chamber</li>
                <li>Cypher</li>
                <li>Fade</li>
                <li>Gekko</li>
                <li>Harbor</li>
                <li>Jett</li>
                <li>KAY/O</li>
                <li>Killjoy</li>
                <li>Neon</li>
                <li>Omen</li>
                <li>Phoenix</li>
                <li>Raze</li>
                <li>Reyna</li>
                <li>Sage</li>
                <li>Skye</li>
                <li>Sova</li>
                <li>Viper</li>
                <li>Yoru</li>
              </ul>
            </div>
          </div>
          <div class="permap" id="Fracture">
            <div class="image">
              <img class="icon" srcset="icons/Fracture.jpg" width="100px"/>
            </div>
            <div class="dropdown" id="FractureDropdown">
              <div class="select">
                <span class="selected" id="FracturePick">Astra</span>
                <div class="caret"></div>
              </div>
              <ul class="menu">
                <li class="active">Astra</li>
                <li>Breach</li>
                <li>Brimstone</li>
                <li>Chamber</li>
                <li>Cypher</li>
                <li>Fade</li>
                <li>Gekko</li>
                <li>Harbor</li>
                <li>Jett</li>
                <li>KAY/O</li>
                <li>Killjoy</li>
                <li>Neon</li>
                <li>Omen</li>
                <li>Phoenix</li>
                <li>Raze</li>
                <li>Reyna</li>
                <li>Sage</li>
                <li>Skye</li>
                <li>Sova</li>
                <li>Viper</li>
                <li>Yoru</li>
              </ul>
            </div>
          </div>
          <div class="permap" id="Pearl">
            <div class="image">
              <img class="icon" srcset="icons/Pearl.jpg" width="100px"/>
            </div>
            <div class="dropdown" id="PearlDropdown">
              <div class="select">
                <span class="selected" id="PearlPick">Astra</span>
                <div class="caret"></div>
              </div>
              <ul class="menu">
                <li class="active">Astra</li>
                <li>Breach</li>
                <li>Brimstone</li>
                <li>Chamber</li>
                <li>Cypher</li>
                <li>Fade</li>
                <li>Gekko</li>
                <li>Harbor</li>
                <li>Jett</li>
                <li>KAY/O</li>
                <li>Killjoy</li>
                <li>Neon</li>
                <li>Omen</li>
                <li>Phoenix</li>
                <li>Raze</li>
                <li>Reyna</li>
                <li>Sage</li>
                <li>Skye</li>
                <li>Sova</li>
                <li>Viper</li>
                <li>Yoru</li>
              </ul>
            </div>
          </div>
          <div class="permap" id="Lotus">
            <div class="image">
              <img class="icon" srcset="icons/Lotus.jpg" width="100px"/>
            </div>
            <div class="dropdown" id="LotusDropdown">
              <div class="select">
                <span class="selected" id="LotusSelect">Astra</span>
                <div class="caret"></div>
              </div>
              <ul class="menu">
                <li class="active">Astra</li>
                <li>Breach</li>
                <li>Brimstone</li>
                <li>Chamber</li>
                <li>Cypher</li>
                <li>Fade</li>
                <li>Gekko</li>
                <li>Harbor</li>
                <li>Jett</li>
                <li>KAY/O</li>
                <li>Killjoy</li>
                <li>Neon</li>
                <li>Omen</li>
                <li>Phoenix</li>
                <li>Raze</li>
                <li>Reyna</li>
                <li>Sage</li>
                <li>Skye</li>
                <li>Sova</li>
                <li>Viper</li>
                <li>Yoru</li>
              </ul>
            </div>
          </div>
        </div>
        <div id="indicator">
          <div class="panel">
            <div class="status-light sl-red" id="redlight"></div>
            <div class="status-light sl-green" id="greenlight"></div>
            <div class="status-light sl-blue" id="bluelight"></div>
          </div>
        </div>
        <div id="fail">
          <span>FAILED</span>
        </div>
        <div id="ready">
          <span>READY</span>
        </div>
        <div id="live">
          <span>LIVE</span>
        </div>
        <div class="dropdown" id="RegionDropdown">
          <div class="select">
            <span class="selected" id="RegionSelect">North America</span>
            <div class="caret"></div>
          </div>
          <ul class="menu">
            <li class="active">Asia Pacific</li>
            <li>Brazil</li>
            <li>Europe</li>
            <li>North America</li>
            <li>Latin America</li>
            <li>Korea</li>
          </ul>
        </div>
      </aside>
    </div>
  </body>
  <script src="require.js"></script>
  <script>
    /* Initializes neccessary objects/dependencies */
    const dropdowns = document.querySelectorAll('.dropdown');
    /* Window controls */
    document.getElementById('min-button').addEventListener('click', () => {
        window.ipcR.send('window:minimize');
    });
    document.getElementById('restore-button').addEventListener('click', () => {
        window.ipcR.send('window:restore');
    });
    document.getElementById('max-button').addEventListener('click', () => {
        window.ipcR.send('window:maximize');
    });
    document.getElementById('close-button').addEventListener('click', () => {
        window.ipcR.send('window:close');
    });

    // event handler when scanbutton is clicked
    document.getElementById('startscan').addEventListener('click', () => {
      const packed = JSON.stringify(choices);
      const refreshdelay = document.getElementById("num").innerHTML;
      const hoverdelay = document.getElementById("num2").innerHTML;
      const lockdelay = document.getElementById("num3").innerHTML;
      window.ipcR.scan([packed,refreshdelay,hoverdelay,lockdelay]);
      document.getElementById("greenlight").style.visibility = "hidden";
      document.getElementById("ready").style.visibility = "hidden";
      document.getElementById("bluelight").style.visibility = "visible";
      document.getElementById("live").style.visibility = "visible";
    });
    // event handler when endscan is clicked
    document.getElementById('endscan').addEventListener('click', () => {
      window.ipcR.endscan();
      document.getElementById("greenlight").style.visibility = "visible";
      document.getElementById("ready").style.visibility = "visible";
      document.getElementById("bluelight").style.visibility = "hidden";
      document.getElementById("live").style.visibility = "hidden";
    });

    // slider event handlers
    const input = document.getElementById("refdelay"),
      number = document.querySelector(".number");
      input.addEventListener("input", () => {
        number.textContent = input.value;
      });
    const input2 = document.getElementById("hoverdelay"),
      number2 = document.querySelector(".number2");
      input2.addEventListener("input", () => {
        number2.textContent = input2.value;
      });
    const input3 = document.getElementById("lockdelay"),
      number3 = document.querySelector(".number3");
      input3.addEventListener("input", () => {
        number3.textContent = input3.value;
      });

    //loop through all dropdown elements
    dropdowns.forEach(dropdown => {
      // get inner elements from each dropdown
      const select = dropdown.querySelector('.select');
      const caret = dropdown.querySelector('.caret');
      const menu = dropdown.querySelector('.menu');
      const options = dropdown.querySelectorAll('.menu li')
      const selected = dropdown.querySelector('.selected');
      // we are using this method in order to have multiple dropdowns on the page work
      // click event to selected elements
      select.addEventListener('click',() => {
        // add the clicked select styles to the select element
        select.classList.toggle('select-clicked');
        // add the rotate styles to the caret element
        caret.classList.toggle('caret-rotate');
        // add the open styles to the menu element
        menu.classList.toggle('menu-open');
      });
      // Loop through all option elems
      options.forEach(option => {
        // click event to option element
        option.addEventListener('click',() => {
          // change selected inner text to clicked option inner text
          selected.innerText = option.innerText;
          // Add the clicked select styles to the select element
          select.classList.remove('select-clicked');
          // Add the rotate styles to the caret elem
          caret.classList.remove('caret-rotate');
          // Add the open styles to the menu elem
          menu.classList.remove('menu-open');
          // Remove active class from all option elems
          options.forEach(option => {
            option.classList.remove('active');
          });
          // Add active class to clicked option element
          option.classList.add('active');
          // Repopulating values in choices object
          const BindPick = document.getElementById('BindPick');
          choices["duality"] = BindPick.innerHTML;
          const HavenPick = document.getElementById('HavenPick');
          choices["triad"] = HavenPick.innerHTML;
          const SplitPick = document.getElementById('SplitPick');
          choices["bonsai"] = SplitPick.innerHTML;
          const AscentPick = document.getElementById('AscentPick');
          choices["ascent"] = AscentPick.innerHTML;
          const IceboxPick = document.getElementById('IceboxPick');
          choices["port"] = IceboxPick.innerHTML;
          const BreezePick = document.getElementById('BreezePick');
          choices["foxtrot"] = BreezePick.innerHTML;
          const FracturePick = document.getElementById('FracturePick');
          choices["canyon"] = FracturePick.innerHTML;
          const PearlPick = document.getElementById('PearlPick');
          choices["pitt"] = PearlPick.innerHTML;
          const LotusPick = document.getElementById('LotusSelect');
          choices["jam"] = LotusPick.innerHTML;
          const regionpick = document.getElementById('RegionSelect');
          region = regionpick.innerHTML
          console.log(choices)
        });
      });
    });
    // onloading
    const choices = {}
    const region = ""
    const maporder = ["duality","triad","bonsai","ascent","port","foxtrot","canyon","pitt","jam","region"]
    InitializeChoices = () => {
      let x = 0;
      dropdowns.forEach(dropdown => {
        const picked = dropdown.querySelector('.selected')
        console.log(picked.innerHTML)
        choices[maporder[x]] = picked.innerHTML;
        x++;
      })
      document.getElementById("redlight").style.visibility = "hidden";
      document.getElementById("fail").style.visibility = "hidden";
      document.getElementById("bluelight").style.visibility = "hidden";
      document.getElementById("live").style.visibility = "hidden";
    };
  </script>
</html>